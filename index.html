<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mian Chicken Shop - Invoice</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .input-box { margin-bottom: 10px; width: 100%; padding: 8px; border: 1px solid #ccc; }
        button { background: #27ae60; color: white; border: none; padding: 10px; cursor: pointer; width: 100%; font-weight: bold; margin-bottom: 5px; }
        
        /* Invoice Area */
        #print-area { padding: 30px; border: 1px solid #000; display: none; margin-top: 20px; background: white; }
        .header { display: flex; justify-content: space-between; align-items: center; }
        .logo-img { max-width: 100px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    </style>
</head>
<body>

<div class="container" id="form-div">
    <h2 style="text-align:center;">Mian Chicken Shop Invoice</h2>
    <input type="file" id="logo" accept="image/*" class="input-box" onchange="loadImg(event)">
    <input type="text" id="cName" placeholder="Customer Name" class="input-box">
    <input type="text" id="iName" placeholder="Item (e.g. Chicken)" class="input-box">
    <input type="number" id="iQty" placeholder="Weight/Qty" class="input-box">
    <input type="number" id="iPrice" placeholder="Price per kg" class="input-box">
    
    <button onclick="showInvoice()">Preview Bill</button>
</div>

<div id="print-area">
    <div class="header">
        <div id="logo-place"></div>
        <div style="text-align:right">
            <h2 id="b-name">Mian Chicken Shop</h2>
            <p>Date: <span id="d-date"></span></p>
        </div>
    </div>
    <hr>
    <p><strong>Customer:</strong> <span id="c-out"></span></p>
    <table>
        <thead>
            <tr style="background:#eee">
                <th>Item</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="t-item"></td>
                <td id="t-qty"></td>
                <td id="t-price"></td>
                <td id="t-total"></td>
            </tr>
        </tbody>
    </table>
    <h3 style="text-align:right">Grand Total: <span id="g-total"></span> PKR</h3>
</div>

<div id="actions" style="display:none; max-width:600px; margin: 10px auto;">
    <button onclick="download()">Download PDF</button>
    <button style="background:#3498db" onclick="window.print()">Print directly (Backup)</button>
</div>

<script>
    let imgBase64 = "";
    function loadImg(e) {
        let reader = new FileReader();
        reader.onload = function() { imgBase64 = reader.result; }
        reader.readAsDataURL(e.target.files[0]);
    }

    function showInvoice() {
        document.getElementById('c-out').innerText = document.getElementById('cName').value;
        document.getElementById('t-item').innerText = document.getElementById('iName').value;
        document.getElementById('t-qty').innerText = document.getElementById('iQty').value;
        document.getElementById('t-price').innerText = document.getElementById('iPrice').value;
        let total = document.getElementById('iQty').value * document.getElementById('iPrice').value;
        document.getElementById('t-total').innerText = total.toFixed(2);
        document.getElementById('g-total').innerText = total.toFixed(2);
        document.getElementById('d-date').innerText = new Date().toLocaleDateString();
        
        if(imgBase64) {
            document.getElementById('logo-place').innerHTML = `<img src="${imgBase64}" class="logo-img">`;
        }

        document.getElementById('print-area').style.display = 'block';
        document.getElementById('actions').style.display = 'block';
    }

    function download() {
        const element = document.getElementById('print-area');
        html2pdf().from(element).save('Bill.pdf');
    }
</script>

</body>
</html>
